



<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>shap.plots.decision &mdash; SHAP latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=7ab3649f" />
      <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=c6e86fd7"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="shap.plots.embedding" href="shap.plots.embedding.html" />
    <link rel="prev" title="shap.plots.partial_dependence" href="shap.plots.partial_dependence.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../index.html">
            
              <img src="../_static/shap_logo_white.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overviews.html">Topical overviews</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tabular_examples.html">Tabular examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../text_examples.html">Text examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../image_examples.html">Image examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genomic_examples.html">Genomic examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api.html#explanation">Explanation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#explainers">explainers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#plots">plots</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="shap.plots.bar.html">shap.plots.bar</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.waterfall.html">shap.plots.waterfall</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.scatter.html">shap.plots.scatter</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.heatmap.html">shap.plots.heatmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.force.html">shap.plots.force</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.text.html">shap.plots.text</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.image.html">shap.plots.image</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.partial_dependence.html">shap.plots.partial_dependence</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">shap.plots.decision</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.embedding.html">shap.plots.embedding</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.initjs.html">shap.plots.initjs</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.group_difference.html">shap.plots.group_difference</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.image_to_text.html">shap.plots.image_to_text</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.monitoring.html">shap.plots.monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.beeswarm.html">shap.plots.beeswarm</a></li>
<li class="toctree-l3"><a class="reference internal" href="shap.plots.violin.html">shap.plots.violin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#maskers">maskers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#models">models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#utils">utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#datasets">datasets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_examples.html">API examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks.html">Benchmarks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SHAP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api.html">API Reference</a></li>
      <li class="breadcrumb-item active">shap.plots.decision</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/shap.plots.decision.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="shap-plots-decision">
<h1>shap.plots.decision<a class="headerlink" href="#shap-plots-decision" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="shap.plots.decision">
<span class="sig-prename descclassname"><span class="pre">shap.plots.</span></span><span class="sig-name descname"><span class="pre">decision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shap_values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataFrame</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'importance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_display_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'identity'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#333333'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_demarc_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#333333'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_bar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_size_plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_objects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_base_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend_location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'best'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DecisionPlotResult</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#shap.plots.decision" title="Link to this definition"></a></dt>
<dd><p>Visualize model decisions using cumulative SHAP values.</p>
<p>Each plotted line explains a single model prediction. If a single prediction is plotted, feature values will be
printed in the plot (if supplied). If multiple predictions are plotted together, feature values will not be printed.
Plotting too many predictions together will make the plot unintelligible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>base_value</strong><span class="classifier">float or numpy.ndarray</span></dt><dd><p>This is the reference value that the feature contributions start from. Usually, this is
<code class="docutils literal notranslate"><span class="pre">explainer.expected_value</span></code>.</p>
</dd>
<dt><strong>shap_values</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>Matrix of SHAP values (# features) or (# samples x # features) from
<code class="docutils literal notranslate"><span class="pre">explainer.shap_values()</span></code>. Or cube of SHAP interaction values (# samples x
# features x # features) from <code class="docutils literal notranslate"><span class="pre">explainer.shap_interaction_values()</span></code>.</p>
</dd>
<dt><strong>features</strong><span class="classifier">numpy.array or pandas.Series or pandas.DataFrame or numpy.ndarray or list</span></dt><dd><p>Matrix of feature values (# features) or (# samples x # features). This provides the values of all the
features and, optionally, the feature names.</p>
</dd>
<dt><strong>feature_names</strong><span class="classifier">list or numpy.ndarray</span></dt><dd><p>List of feature names (# features). If <code class="docutils literal notranslate"><span class="pre">None</span></code>, names may be derived from the
<code class="docutils literal notranslate"><span class="pre">features</span></code> argument if a Pandas object is provided. Otherwise, numeric feature
names will be generated.</p>
</dd>
<dt><strong>feature_order</strong><span class="classifier">str or None or list or numpy.ndarray</span></dt><dd><p>Any of “importance” (the default), “hclust” (hierarchical clustering), <code class="docutils literal notranslate"><span class="pre">None</span></code>,
or a list/array of indices.</p>
</dd>
<dt><strong>feature_display_range: slice or range</strong></dt><dd><p>The slice or range of features to plot after ordering features by <code class="docutils literal notranslate"><span class="pre">feature_order</span></code>. A step of 1 or <code class="docutils literal notranslate"><span class="pre">None</span></code>
will display the features in ascending order. A step of -1 will display the features in descending order. If
<code class="docutils literal notranslate"><span class="pre">feature_display_range=None</span></code>, <code class="docutils literal notranslate"><span class="pre">slice(-1,</span> <span class="pre">-21,</span> <span class="pre">-1)</span></code> is used (i.e. show the last 20 features in descending order).
If <code class="docutils literal notranslate"><span class="pre">shap_values</span></code> contains interaction values, the number of features is automatically expanded to include all
possible interactions: N(N + 1)/2 where N = <code class="docutils literal notranslate"><span class="pre">shap_values.shape[1]</span></code>.</p>
</dd>
<dt><strong>highlight</strong><span class="classifier">Any</span></dt><dd><p>Specify which observations to draw in a different line style. All numpy indexing methods are supported. For
example, list of integer indices, or a bool array.</p>
</dd>
<dt><strong>link</strong><span class="classifier">str</span></dt><dd><p>Use “identity” or “logit” to specify the transformation used for the x-axis. The “logit” link transforms
log-odds into probabilities.</p>
</dd>
<dt><strong>plot_color</strong><span class="classifier">str or matplotlib.colors.ColorMap</span></dt><dd><p>Color spectrum used to draw the plot lines. If <code class="docutils literal notranslate"><span class="pre">str</span></code>, a registered matplotlib color name is assumed.</p>
</dd>
<dt><strong>axis_color</strong><span class="classifier">str or int</span></dt><dd><p>Color used to draw plot axes.</p>
</dd>
<dt><strong>y_demarc_color</strong><span class="classifier">str or int</span></dt><dd><p>Color used to draw feature demarcation lines on the y-axis.</p>
</dd>
<dt><strong>alpha</strong><span class="classifier">float</span></dt><dd><p>Alpha blending value in [0, 1] used to draw plot lines.</p>
</dd>
<dt><strong>color_bar</strong><span class="classifier">bool</span></dt><dd><p>Whether to draw the color bar (legend).</p>
</dd>
<dt><strong>auto_size_plot</strong><span class="classifier">bool</span></dt><dd><p>Whether to automatically size the matplotlib plot to fit the number of features
displayed. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, specify the plot size using matplotlib before calling
this function.</p>
</dd>
<dt><strong>title</strong><span class="classifier">str</span></dt><dd><p>Title of the plot.</p>
</dd>
<dt><strong>xlim: tuple[float, float]</strong></dt><dd><p>The extents of the x-axis (e.g. <code class="docutils literal notranslate"><span class="pre">(-1.0,</span> <span class="pre">1.0)</span></code>). If not specified, the limits
are determined by the maximum/minimum predictions centered around base_value
when <code class="docutils literal notranslate"><span class="pre">link=&quot;identity&quot;</span></code>. When <code class="docutils literal notranslate"><span class="pre">link=&quot;logit&quot;</span></code>, the x-axis extents are <code class="docutils literal notranslate"><span class="pre">(0,</span>
<span class="pre">1)</span></code> centered at 0.5. <code class="docutils literal notranslate"><span class="pre">xlim</span></code> values are not transformed by the <code class="docutils literal notranslate"><span class="pre">link</span></code>
function. This argument is provided to simplify producing multiple plots on the
same scale for comparison.</p>
</dd>
<dt><strong>show</strong><span class="classifier">bool</span></dt><dd><p>Whether <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" title="(in Matplotlib v3.10.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">matplotlib.pyplot.show()</span></code></a> is called before returning.
Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> allows the plot
to be customized further after it has been created.</p>
</dd>
<dt><strong>return_objects</strong><span class="classifier">bool</span></dt><dd><p>Whether to return a <code class="xref py py-obj docutils literal notranslate"><span class="pre">DecisionPlotResult</span></code> object containing various plotting
features. This can be used to generate multiple decision plots using the same
feature ordering and scale.</p>
</dd>
<dt><strong>ignore_warnings</strong><span class="classifier">bool</span></dt><dd><p>Plotting many data points or too many features at a time may be slow, or may create very large plots. Set
this argument to <code class="docutils literal notranslate"><span class="pre">True</span></code> to override hard-coded limits that prevent plotting large amounts of data.</p>
</dd>
<dt><strong>new_base_value</strong><span class="classifier">float</span></dt><dd><p>SHAP values are relative to a base value. By default, this base value is the
expected value of the model’s raw predictions. Use <code class="docutils literal notranslate"><span class="pre">new_base_value</span></code> to shift
the base value to an arbitrary value (e.g. the cutoff point for a binary
classification task).</p>
</dd>
<dt><strong>legend_labels</strong><span class="classifier">list of str</span></dt><dd><p>List of legend labels. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, legend will not be shown.</p>
</dd>
<dt><strong>legend_location</strong><span class="classifier">str</span></dt><dd><p>Legend location. Any of “best”, “upper right”, “upper left”, “lower left”, “lower right”, “right”,
“center left”, “center right”, “lower center”, “upper center”, “center”.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>DecisionPlotResult or None</dt><dd><p>Returns a <code class="xref py py-obj docutils literal notranslate"><span class="pre">DecisionPlotResult</span></code> object if <code class="docutils literal notranslate"><span class="pre">return_objects=True</span></code>. Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> otherwise (the default).</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Plot two decision plots using the same feature order and x-axis.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">range1</span><span class="p">,</span> <span class="n">range2</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">decision_plot</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">shap_values</span><span class="p">[</span><span class="n">range1</span><span class="p">],</span> <span class="n">features</span><span class="p">[</span><span class="n">range1</span><span class="p">],</span> <span class="n">return_objects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decision_plot</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">shap_values</span><span class="p">[</span><span class="n">range2</span><span class="p">],</span> <span class="n">features</span><span class="p">[</span><span class="n">range2</span><span class="p">],</span> <span class="n">feature_order</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">feature_idx</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">xlim</span><span class="p">)</span>
</pre></div>
</div>
<p>See more <a class="reference external" href="https://shap.readthedocs.io/en/latest/example_notebooks/api_examples/plots/decision_plot.html">decision plot examples here</a>.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="shap.plots.partial_dependence.html" class="btn btn-neutral float-left" title="shap.plots.partial_dependence" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="shap.plots.embedding.html" class="btn btn-neutral float-right" title="shap.plots.embedding" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Scott Lundberg.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>